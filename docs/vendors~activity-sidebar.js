(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{1207:function(e,t,r){},1208:function(e,t,r){},1223:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r(178),o=r.n(n),s=r(5),i=r.n(s),c=r(135),l=r.n(c),u=r(3),d=r(341),f=r(342),p=r(78),b=r(8),m=(r(98),r(343)),k=r(189),h=r(190),v=r(515),C=r(1118),y=r(2),g=r(42),A=r(224),E=r(344),T=r(132),F=r(489),S=r(490),w=r(186),I=r(1),O=(r(1207),function(e){return a.createElement(A.a,{constrainToScrollParent:!0,isRightAligned:!0},a.createElement(g.a,{isDisabled:e.isDisabled,type:"button"},a.createElement(E.a,null,a.createElement(y.b,w.a.tasksAddTask))),a.createElement(T.a,{className:"bcs-AddTaskMenu"},a.createElement(T.b,{className:"bcs-AddTaskMenu-menuItem",onClick:function(){return e.onMenuItemClick(I.Oe)}},a.createElement("div",{className:"bcs-AddTaskMenu-icon"},a.createElement(S.a,{width:30,height:30})),a.createElement("div",null,a.createElement("div",{className:"bcs-AddTaskMenu-title"},a.createElement(y.b,w.a.taskAddTaskGeneral)),a.createElement("div",{className:"bcs-AddTaskMenu-description"},a.createElement(y.b,w.a.taskAddTaskGeneralDescription)))),a.createElement(T.b,{className:"bcs-AddTaskMenu-menuItem",onClick:function(){return e.onMenuItemClick(I.Ne)}},a.createElement("div",{className:"bcs-AddTaskMenu-icon"},a.createElement(F.a,{width:30,height:30})),a.createElement("div",null,a.createElement("div",{className:"bcs-AddTaskMenu-title"},a.createElement(y.b,w.a.taskAddTaskApproval)),a.createElement("div",{className:"bcs-AddTaskMenu-description"},a.createElement(y.b,w.a.taskAddTaskApprovalDescription))))))}),P=r(493);function U(e){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function M(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function D(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var H=function(e){function t(){var e,r,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,s=new Array(o),i=0;i<o;i++)s[i]=arguments[i];return a=this,n=(e=j(t)).call.apply(e,[this].concat(s)),r=!n||"object"!==U(n)&&"function"!=typeof n?D(a):n,_(D(D(r)),"state",{error:null,isTaskFormOpen:!1,taskType:I.Ne}),_(D(D(r)),"handleClickMenuItem",function(e){return r.setState({isTaskFormOpen:!0,taskType:e})}),_(D(D(r)),"handleModalClose",function(){r.props.onTaskModalClose(),r.setState({isTaskFormOpen:!1,error:null})}),_(D(D(r)),"handleSubmitSuccess",function(){return r.setState({isTaskFormOpen:!1,error:null})}),_(D(D(r)),"handleSubmitError",function(e){return r.setState({error:e})}),r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}(t,a["Component"]),r=t,(n=[{key:"render",value:function(){var e=this.props,t=e.isDisabled,r=e.taskFormProps,n=this.state,o=n.isTaskFormOpen,s=n.taskType,i=n.error;return a.createElement(a.Fragment,null,a.createElement(O,{isDisabled:t,onMenuItemClick:this.handleClickMenuItem}),a.createElement(P.a,{error:i,onSubmitError:this.handleSubmitError,onSubmitSuccess:this.handleSubmitSuccess,onModalClose:this.handleModalClose,isTaskFormOpen:o,taskFormProps:r,taskType:s}))}}])&&M(r.prototype,n),o&&M(r,o),t}();_(H,"defaultProps",{isDisabled:!1});var W=H,Q=r(1117);r(1208);function R(e){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(){return(x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}function B(e,t,r,a,n,o,s){try{var i=e[o](s),c=i.value}catch(e){return void r(e)}i.done?t(c):Promise.resolve(c).then(a,n)}function V(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function G(e){return(G=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function J(e,t){return(J=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function q(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function z(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,"activityFeedInlineError",function(){return K}),r.d(t,"ActivitySidebarComponent",function(){return X});var K={inlineError:{title:u.a.errorOccured,content:u.a.activityFeedItemApiError}},L="".concat(I.Hd,"_").concat(h.a);Object(k.b)(L);var X=function(e){function t(e){var r,n,s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,s=G(t).call(this,e),r=!s||"object"!==R(s)&&"function"!=typeof s?q(n):s,z(q(q(r)),"state",{}),z(q(q(r)),"feedSuccessCallback",function(){r.fetchFeedItems()}),z(q(q(r)),"feedErrorCallback",function(e,t,a){r.errorCallback(e,t,a),r.fetchFeedItems()}),z(q(q(r)),"tasksApiNew",{createTask:function(e,t,a,n,o,s){var i=r.state.currentUser,c=r.props,l=c.file,u=c.api;if(!i)throw Object(b.c)();u.getFeedAPI(!1).createTaskNew(l,i,e,t,a,n,function(){o&&o(),r.feedSuccessCallback()},function(e,t,a){s&&s(e,t,a),r.feedErrorCallback(e,t,a)}),r.fetchFeedItems()},deleteTask:function(e){var t=r.props,a=t.file,n=t.api,o=t.onTaskDelete,s=void 0===o?i.a:o;n.getFeedAPI(!1).deleteTaskNew(a,e,function(e){r.feedSuccessCallback(),s(e)},r.feedErrorCallback),r.fetchFeedItems()},updateTask:function(e,t,a){var n=r.props,o=n.file,s=n.api,c=n.onTaskUpdate,l=void 0===c?i.a:c;s.getFeedAPI(!1).updateTaskNew(o,e,function(){r.feedSuccessCallback(),t&&t(),l()},function(e,t){a&&a(e,t),r.feedErrorCallback(e,t)}),r.fetchFeedItems()},updateTaskAssignment:function(e,t,a){var n=r.props,o=n.file;n.api.getFeedAPI(!1).updateTaskCollaborator(o,e,t,a,r.feedSuccessCallback,r.feedErrorCallback),r.fetchFeedItems()}}),z(q(q(r)),"deleteTask",function(e){var t=e.id,a=r.props,n=a.file,o=a.api,s=a.onTaskDelete,c=void 0===s?i.a:s;o.getFeedAPI(!1).deleteTask(n,t,function(e){r.feedSuccessCallback(),c(e)},r.feedErrorCallback),r.fetchFeedItems()}),z(q(q(r)),"updateTask",function(e){var t=e.text,a=e.id,n=r.props,o=n.file;n.api.getFeedAPI(!1).updateTask(o,a,t,r.feedSuccessCallback,r.feedErrorCallback),r.fetchFeedItems()}),z(q(q(r)),"updateTaskAssignment",function(e,t,a){var n=r.props,o=n.file;n.api.getFeedAPI(!1).updateTaskAssignment(o,e,t,a,r.feedSuccessCallback,r.feedErrorCallback),r.fetchFeedItems()}),z(q(q(r)),"deleteComment",function(e){var t=e.id,a=e.permissions,n=r.props,o=n.file,s=n.api,c=n.onCommentDelete,l=void 0===c?i.a:c;s.getFeedAPI(!1).deleteComment(o,t,a,function(e){r.feedSuccessCallback(),l(e)},r.feedErrorCallback),r.fetchFeedItems()}),z(q(q(r)),"createComment",function(e,t){var a=r.props,n=a.file,o=a.api,s=a.onCommentCreate,c=void 0===s?i.a:s,l=r.state.currentUser;if(!l)throw Object(b.c)();o.getFeedAPI(!1).createComment(n,l,e,t,function(e){c(e),r.feedSuccessCallback()},r.feedErrorCallback),r.fetchFeedItems()}),z(q(q(r)),"createTask",function(e,t,a){var n=r.state.currentUser,o=r.props,s=o.file,i=o.api;if(!n)throw Object(b.c)();i.getFeedAPI(!1).createTask(s,n,e,t,a,r.feedSuccessCallback,r.feedErrorCallback),r.fetchFeedItems()}),z(q(q(r)),"deleteAppActivity",function(e){var t=e.id,a=r.props,n=a.file;a.api.getFeedAPI(!1).deleteAppActivity(n,t,r.feedSuccessCallback,r.feedErrorCallback),r.fetchFeedItems()}),z(q(q(r)),"fetchFeedItemsSuccessCallback",function(e){r.setState({feedItems:e,activityFeedError:void 0})}),z(q(q(r)),"fetchFeedItemsErrorCallback",function(e){r.setState({feedItems:e,activityFeedError:K})}),z(q(q(r)),"errorCallback",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};console.error(e),r.props.onError(e,t,a)}),z(q(q(r)),"fetchCurrentUserSuccessCallback",function(e){r.setState({currentUser:e,currentUserError:void 0})}),z(q(q(r)),"getApproverContactsSuccessCallback",function(e){var t=e.entries;r.setState({approverSelectorContacts:t})}),z(q(q(r)),"getMentionContactsSuccessCallback",function(e){var t=e.entries;r.setState({mentionSelectorContacts:t})}),z(q(q(r)),"getApproverWithQuery",o()(r.getCollaborators.bind(q(q(r)),r.getApproverContactsSuccessCallback,r.errorCallback),I.F)),z(q(q(r)),"getMentionWithQuery",o()(r.getCollaborators.bind(q(q(r)),r.getMentionContactsSuccessCallback,r.errorCallback),I.F)),z(q(q(r)),"fetchCurrentUserErrorCallback",function(e,t){r.setState({currentUser:void 0,currentUserError:{maskError:{errorHeader:u.a.currentUserErrorHeaderMessage,errorSubHeader:u.a.defaultErrorMaskSubHeaderMessage}}}),r.errorCallback(e,t,{error:e})}),z(q(q(r)),"getAvatarUrl",function(){var e,t=(e=regeneratorRuntime.mark(function e(t){var a,n,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.props,n=a.file,o=a.api,e.abrupt("return",o.getUsersAPI(!1).getAvatarUrlWithAccessToken(t,n.id));case 2:case"end":return e.stop()}},e,this)}),function(){var t=this,r=arguments;return new Promise(function(a,n){var o=e.apply(t,r);function s(e){B(o,a,n,s,i,"next",e)}function i(e){B(o,a,n,s,i,"throw",e)}s(void 0)})});return function(e){return t.apply(this,arguments)}}()),z(q(q(r)),"onTaskModalClose",function(){r.setState({approverSelectorContacts:[]})}),z(q(q(r)),"renderAddTaskButton",function(){var e=r.props.isDisabled,t=r.state.approverSelectorContacts,n=q(q(r)),o=n.getApproverWithQuery,s=n.getAvatarUrl,i=n.tasksApiNew.createTask,c={isDisabled:e,onTaskModalClose:n.onTaskModalClose},l={approverSelectorContacts:t,createTask:i,getApproverWithQuery:o,getAvatarUrl:s,id:"",message:"",approvers:[]};return a.createElement(W,x({},c,{taskFormProps:l}))}),r.props.logger.onReadyMetric({endMarkName:L}),r}var r,n,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&J(e,t)}(t,a["PureComponent"]),r=t,(n=[{key:"componentDidMount",value:function(){var e=this.props.currentUser;this.fetchFeedItems(!0),this.fetchCurrentUser(e)}},{key:"fetchCurrentUser",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this.props,a=r.api,n=r.file;if(!n)throw Object(b.a)();void 0===e?a.getUsersAPI(t).getUser(n.id,this.fetchCurrentUserSuccessCallback,this.fetchCurrentUserErrorCallback):this.setState({currentUser:e,currentUserError:void 0})}},{key:"fetchFeedItems",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this.props,a=r.file,n=r.api,o=r.features,s=Object(p.isFeatureEnabled)(o,"activityFeed.tasks.newApi"),i=Object(p.isFeatureEnabled)(o,"activityFeed.appActivity.enabled");n.getFeedAPI(t).feedItems(a,e,this.fetchFeedItemsSuccessCallback,this.fetchFeedItemsErrorCallback,this.errorCallback,s,i)}},{key:"getCollaborators",value:function(e,t,r){var a=this.props,n=a.file,o=a.api;r&&""!==r.trim()&&o.getFileCollaboratorsAPI(!0).getFileCollaborators(n.id,e,t,{filter_term:r})}},{key:"render",value:function(){var e=this.props,t=e.file,r=e.isDisabled,n=void 0!==r&&r,o=e.onVersionHistoryClick,s=e.getUserProfileUrl,i=e.features,c=this.state,l=c.currentUser,u=c.approverSelectorContacts,d=c.mentionSelectorContacts,f=c.feedItems,b=c.activityFeedError,m=c.currentUserError,k=Object(p.isFeatureEnabled)(i,"activityFeed.tasks.newApi")?this.tasksApiNew.updateTaskAssignment:this.updateTaskAssignment,h=Object(p.isFeatureEnabled)(i,"activityFeed.tasks.newApi")?this.tasksApiNew.updateTask:this.updateTask,y=Object(p.isFeatureEnabled)(i,"activityFeed.tasks.newApi")?this.tasksApiNew.deleteTask:this.deleteTask;return a.createElement(C.a,{className:"bcs-activity",title:Q.a.getTitleForView(I.ae),actions:a.createElement(p.FeatureFlag,{feature:"activityFeed.tasks.createButton",enabled:this.renderAddTaskButton})},a.createElement(v.a,{file:t,activityFeedError:b,approverSelectorContacts:u,mentionSelectorContacts:d,currentUser:l,isDisabled:n,onAppActivityDelete:this.deleteAppActivity,onCommentCreate:this.createComment,onCommentDelete:this.deleteComment,onTaskCreate:this.createTask,onTaskDelete:y,onTaskUpdate:h,onTaskModalClose:this.onTaskModalClose,onTaskAssignmentUpdate:k,getApproverWithQuery:this.getApproverWithQuery,getMentionWithQuery:this.getMentionWithQuery,onVersionHistoryClick:o,getAvatarUrl:this.getAvatarUrl,getUserProfileUrl:s,feedItems:f,currentUserError:m}))}}])&&V(r.prototype,n),s&&V(r,s),t}();z(X,"defaultProps",{isDisabled:!1});t.default=l()([Object(m.a)(I.Hd),Object(f.a)(I.Hd),d.b,p.withFeatureConsumer])(X)}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvYm94LXVpLWVsZW1lbnRzL2VzL2VsZW1lbnRzL2NvbnRlbnQtc2lkZWJhci9BZGRUYXNrTWVudS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvYm94LXVpLWVsZW1lbnRzL2VzL2VsZW1lbnRzL2NvbnRlbnQtc2lkZWJhci9BZGRUYXNrQnV0dG9uLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9ib3gtdWktZWxlbWVudHMvZXMvZWxlbWVudHMvY29udGVudC1zaWRlYmFyL0FjdGl2aXR5U2lkZWJhci5qcyJdLCJuYW1lcyI6WyJlbGVtZW50c19jb250ZW50X3NpZGViYXJfQWRkVGFza01lbnUiLCJwcm9wcyIsInJlYWN0IiwiZHJvcGRvd25fbWVudSIsImNvbnN0cmFpblRvU2Nyb2xsUGFyZW50IiwiaXNSaWdodEFsaWduZWQiLCJjb21wb25lbnRzX2J1dHRvbiIsImlzRGlzYWJsZWQiLCJ0eXBlIiwiTWVudVRvZ2dsZSIsImluZGV4X2VzIiwiY29udGVudF9zaWRlYmFyX21lc3NhZ2VzIiwidGFza3NBZGRUYXNrIiwibWVudSIsImNsYXNzTmFtZSIsIm9uQ2xpY2siLCJvbk1lbnVJdGVtQ2xpY2siLCJlc19jb25zdGFudHMiLCJJY29uVGFza0dlbmVyYWwiLCJ3aWR0aCIsImhlaWdodCIsInRhc2tBZGRUYXNrR2VuZXJhbCIsInRhc2tBZGRUYXNrR2VuZXJhbERlc2NyaXB0aW9uIiwiSWNvblRhc2tBcHByb3ZhbCIsInRhc2tBZGRUYXNrQXBwcm92YWwiLCJ0YXNrQWRkVGFza0FwcHJvdmFsRGVzY3JpcHRpb24iLCJfdHlwZW9mIiwib2JqIiwiU3ltYm9sIiwiaXRlcmF0b3IiLCJjb25zdHJ1Y3RvciIsInByb3RvdHlwZSIsIl9kZWZpbmVQcm9wZXJ0aWVzIiwidGFyZ2V0IiwiaSIsImxlbmd0aCIsImRlc2NyaXB0b3IiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImtleSIsIl9nZXRQcm90b3R5cGVPZiIsIm8iLCJzZXRQcm90b3R5cGVPZiIsImdldFByb3RvdHlwZU9mIiwiX19wcm90b19fIiwiX3NldFByb3RvdHlwZU9mIiwicCIsIl9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQiLCJzZWxmIiwiUmVmZXJlbmNlRXJyb3IiLCJfZGVmaW5lUHJvcGVydHkiLCJ2YWx1ZSIsIkFkZFRhc2tCdXR0b25fQWRkVGFza0J1dHRvbiIsIl9SZWFjdCRDb21wb25lbnQiLCJBZGRUYXNrQnV0dG9uIiwiX2dldFByb3RvdHlwZU9mMiIsIl90aGlzIiwiY2FsbCIsImluc3RhbmNlIiwiQ29uc3RydWN0b3IiLCJUeXBlRXJyb3IiLCJfY2xhc3NDYWxsQ2hlY2siLCJ0aGlzIiwiX2xlbiIsImFyZ3VtZW50cyIsImFyZ3MiLCJBcnJheSIsIl9rZXkiLCJhcHBseSIsImNvbmNhdCIsImVycm9yIiwiaXNUYXNrRm9ybU9wZW4iLCJ0YXNrVHlwZSIsInNldFN0YXRlIiwib25UYXNrTW9kYWxDbG9zZSIsImUiLCJwcm90b1Byb3BzIiwic3RhdGljUHJvcHMiLCJzdWJDbGFzcyIsInN1cGVyQ2xhc3MiLCJjcmVhdGUiLCJfaW5oZXJpdHMiLCJfdGhpcyRwcm9wcyIsInRhc2tGb3JtUHJvcHMiLCJfdGhpcyRzdGF0ZSIsInN0YXRlIiwiaGFuZGxlQ2xpY2tNZW51SXRlbSIsIlRhc2tNb2RhbCIsIm9uU3VibWl0RXJyb3IiLCJoYW5kbGVTdWJtaXRFcnJvciIsIm9uU3VibWl0U3VjY2VzcyIsImhhbmRsZVN1Ym1pdFN1Y2Nlc3MiLCJvbk1vZGFsQ2xvc2UiLCJoYW5kbGVNb2RhbENsb3NlIiwiY29udGVudF9zaWRlYmFyX0FkZFRhc2tCdXR0b24iLCJBY3Rpdml0eVNpZGViYXJfdHlwZW9mIiwiX2V4dGVuZHMiLCJhc3NpZ24iLCJzb3VyY2UiLCJoYXNPd25Qcm9wZXJ0eSIsImFzeW5jR2VuZXJhdG9yU3RlcCIsImdlbiIsInJlc29sdmUiLCJyZWplY3QiLCJfbmV4dCIsIl90aHJvdyIsImFyZyIsImluZm8iLCJkb25lIiwiUHJvbWlzZSIsInRoZW4iLCJBY3Rpdml0eVNpZGViYXJfZGVmaW5lUHJvcGVydGllcyIsIkFjdGl2aXR5U2lkZWJhcl9nZXRQcm90b3R5cGVPZiIsIkFjdGl2aXR5U2lkZWJhcl9zZXRQcm90b3R5cGVPZiIsIkFjdGl2aXR5U2lkZWJhcl9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQiLCJBY3Rpdml0eVNpZGViYXJfZGVmaW5lUHJvcGVydHkiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiZCIsIl9fd2VicGFja19leHBvcnRzX18iLCJhY3Rpdml0eUZlZWRJbmxpbmVFcnJvciIsIkFjdGl2aXR5U2lkZWJhcl9BY3Rpdml0eVNpZGViYXIiLCJpbmxpbmVFcnJvciIsInRpdGxlIiwibWVzc2FnZXMiLCJlcnJvck9jY3VyZWQiLCJjb250ZW50IiwiYWN0aXZpdHlGZWVkSXRlbUFwaUVycm9yIiwiTUFSS19OQU1FX0pTX1JFQURZIiwiY29uc3RhbnRzIiwicGVyZm9ybWFuY2UiLCJfUmVhY3QkUHVyZUNvbXBvbmVudCIsIkFjdGl2aXR5U2lkZWJhciIsIl9wcm9wcyIsIkFjdGl2aXR5U2lkZWJhcl9jbGFzc0NhbGxDaGVjayIsImZldGNoRmVlZEl0ZW1zIiwiY29kZSIsImNvbnRleHRJbmZvIiwiZXJyb3JDYWxsYmFjayIsImNyZWF0ZVRhc2siLCJtZXNzYWdlIiwiYXNzaWduZWVzIiwiZHVlQXQiLCJvblN1Y2Nlc3MiLCJvbkVycm9yIiwiY3VycmVudFVzZXIiLCJmaWxlIiwiYXBpIiwidXRpbHNfZXJyb3IiLCJnZXRGZWVkQVBJIiwiY3JlYXRlVGFza05ldyIsImZlZWRTdWNjZXNzQ2FsbGJhY2siLCJmZWVkRXJyb3JDYWxsYmFjayIsImRlbGV0ZVRhc2siLCJ0YXNrIiwiX3RoaXMkcHJvcHMyIiwiX3RoaXMkcHJvcHMyJG9uVGFza0RlIiwib25UYXNrRGVsZXRlIiwibm9vcF9kZWZhdWx0IiwiYSIsImRlbGV0ZVRhc2tOZXciLCJ0YXNrSWQiLCJ1cGRhdGVUYXNrIiwiX3RoaXMkcHJvcHMzIiwiX3RoaXMkcHJvcHMzJG9uVGFza1VwIiwib25UYXNrVXBkYXRlIiwidXBkYXRlVGFza05ldyIsInVwZGF0ZVRhc2tBc3NpZ25tZW50IiwidGFza0Fzc2lnbm1lbnRJZCIsInN0YXR1cyIsIl90aGlzJHByb3BzNCIsInVwZGF0ZVRhc2tDb2xsYWJvcmF0b3IiLCJfcmVmIiwiaWQiLCJfdGhpcyRwcm9wczUiLCJfdGhpcyRwcm9wczUkb25UYXNrRGUiLCJfcmVmMiIsInRleHQiLCJfdGhpcyRwcm9wczYiLCJfdGhpcyRwcm9wczciLCJfcmVmMyIsInBlcm1pc3Npb25zIiwiX3RoaXMkcHJvcHM4IiwiX3RoaXMkcHJvcHM4JG9uQ29tbWVuIiwib25Db21tZW50RGVsZXRlIiwiZGVsZXRlQ29tbWVudCIsImNvbW1lbnQiLCJoYXNNZW50aW9uIiwiX3RoaXMkcHJvcHM5IiwiX3RoaXMkcHJvcHM5JG9uQ29tbWVuIiwib25Db21tZW50Q3JlYXRlIiwiY3JlYXRlQ29tbWVudCIsIl90aGlzJHByb3BzMTAiLCJfcmVmNCIsIl90aGlzJHByb3BzMTEiLCJkZWxldGVBcHBBY3Rpdml0eSIsImZlZWRJdGVtcyIsImFjdGl2aXR5RmVlZEVycm9yIiwidW5kZWZpbmVkIiwiY29uc29sZSIsImN1cnJlbnRVc2VyRXJyb3IiLCJjb2xsYWJvcmF0b3JzIiwiZW50cmllcyIsImFwcHJvdmVyU2VsZWN0b3JDb250YWN0cyIsIm1lbnRpb25TZWxlY3RvckNvbnRhY3RzIiwiZGVib3VuY2VfZGVmYXVsdCIsImdldENvbGxhYm9yYXRvcnMiLCJiaW5kIiwiZ2V0QXBwcm92ZXJDb250YWN0c1N1Y2Nlc3NDYWxsYmFjayIsImdldE1lbnRpb25Db250YWN0c1N1Y2Nlc3NDYWxsYmFjayIsIm1hc2tFcnJvciIsImVycm9ySGVhZGVyIiwiY3VycmVudFVzZXJFcnJvckhlYWRlck1lc3NhZ2UiLCJlcnJvclN1YkhlYWRlciIsImRlZmF1bHRFcnJvck1hc2tTdWJIZWFkZXJNZXNzYWdlIiwiZm4iLCJfcmVmNSIsInJlZ2VuZXJhdG9yUnVudGltZSIsIm1hcmsiLCJfY2FsbGVlIiwidXNlcklkIiwiX3RoaXMkcHJvcHMxMiIsIndyYXAiLCJfY29udGV4dCIsInByZXYiLCJuZXh0IiwiYWJydXB0IiwiZ2V0VXNlcnNBUEkiLCJnZXRBdmF0YXJVcmxXaXRoQWNjZXNzVG9rZW4iLCJzdG9wIiwiZXJyIiwiX3giLCJfYXNzZXJ0VGhpc0luaXRpYWxpemUiLCJnZXRBcHByb3ZlcldpdGhRdWVyeSIsImdldEF2YXRhclVybCIsInRhc2tzQXBpTmV3IiwiYXBwcm92ZXJzIiwibG9nZ2VyIiwib25SZWFkeU1ldHJpYyIsImVuZE1hcmtOYW1lIiwiQWN0aXZpdHlTaWRlYmFyX2luaGVyaXRzIiwiZmV0Y2hDdXJyZW50VXNlciIsInVzZXIiLCJzaG91bGREZXN0cm95IiwiX3RoaXMkcHJvcHMxMyIsImdldFVzZXIiLCJmZXRjaEN1cnJlbnRVc2VyU3VjY2Vzc0NhbGxiYWNrIiwiZmV0Y2hDdXJyZW50VXNlckVycm9yQ2FsbGJhY2siLCJzaG91bGRSZWZyZXNoQ2FjaGUiLCJfdGhpcyRwcm9wczE0IiwiZmVhdHVyZXMiLCJzaG91bGRTaG93TmV3VGFza3MiLCJmZWF0dXJlX2NoZWNraW5nIiwic2hvdWxkU2hvd0FwcEFjdGl2aXR5IiwiZmV0Y2hGZWVkSXRlbXNTdWNjZXNzQ2FsbGJhY2siLCJmZXRjaEZlZWRJdGVtc0Vycm9yQ2FsbGJhY2siLCJzdWNjZXNzQ2FsbGJhY2siLCJzZWFyY2hTdHIiLCJfdGhpcyRwcm9wczE1IiwidHJpbSIsImdldEZpbGVDb2xsYWJvcmF0b3JzQVBJIiwiZ2V0RmlsZUNvbGxhYm9yYXRvcnMiLCJmaWx0ZXJfdGVybSIsIl90aGlzJHByb3BzMTYiLCJfdGhpcyRwcm9wczE2JGlzRGlzYWIiLCJvblZlcnNpb25IaXN0b3J5Q2xpY2siLCJnZXRVc2VyUHJvZmlsZVVybCIsIlNpZGViYXJDb250ZW50IiwiU2lkZWJhclV0aWxzIiwiZ2V0VGl0bGVGb3JWaWV3IiwiYWN0aW9ucyIsImZlYXR1cmUiLCJlbmFibGVkIiwicmVuZGVyQWRkVGFza0J1dHRvbiIsIkFjdGl2aXR5RmVlZCIsIm9uQXBwQWN0aXZpdHlEZWxldGUiLCJvblRhc2tDcmVhdGUiLCJvblRhc2tBc3NpZ25tZW50VXBkYXRlIiwiZ2V0TWVudGlvbldpdGhRdWVyeSIsImZsb3dfZGVmYXVsdCIsImNvbW1vbl9sb2dnZXIiLCJlcnJvcl9ib3VuZGFyeSIsImFwaV9jb250ZXh0Il0sIm1hcHBpbmdzIjoieVhBb0RlQSxXQXhDQSxTQUFBQyxHQUNmLE9BQVNDLEVBQUEsY0FBb0JDLEVBQUEsRUFBWSxDQUN6Q0MseUJBQUEsRUFDQUMsZ0JBQUEsR0FDS0gsRUFBQSxjQUFvQkksRUFBQSxFQUFNLENBQy9CQyxXQUFBTixFQUFBTSxXQUNBQyxLQUFBLFVBQ0tOLEVBQUEsY0FBb0JPLEVBQUEsRUFBVSxLQUFRUCxFQUFBLGNBQW9CUSxFQUFBLEVBQWtCQyxFQUFBLEVBQVFDLGdCQUFrQlYsRUFBQSxjQUFvQlcsRUFBQSxFQUFJLENBQ25JQyxVQUFBLG1CQUNLWixFQUFBLGNBQW9CVyxFQUFBLEVBQVEsQ0FDakNDLFVBQUEsMkJBQ0FDLFFBQUEsV0FDQSxPQUFBZCxFQUFBZSxnQkFBbUNDLEVBQUEsTUFFOUJmLEVBQUEsY0FBbUIsT0FDeEJZLFVBQUEsd0JBQ0taLEVBQUEsY0FBb0JnQixFQUFBLEVBQWUsQ0FDeENDLE1BQUEsR0FDQUMsT0FBQSxNQUNPbEIsRUFBQSxjQUFtQixXQUFjQSxFQUFBLGNBQW1CLE9BQzNEWSxVQUFBLHlCQUNLWixFQUFBLGNBQW9CUSxFQUFBLEVBQWtCQyxFQUFBLEVBQVFVLHFCQUF1Qm5CLEVBQUEsY0FBbUIsT0FDN0ZZLFVBQUEsK0JBQ0taLEVBQUEsY0FBb0JRLEVBQUEsRUFBa0JDLEVBQUEsRUFBUVcsa0NBQW9DcEIsRUFBQSxjQUFvQlcsRUFBQSxFQUFRLENBQ25IQyxVQUFBLDJCQUNBQyxRQUFBLFdBQ0EsT0FBQWQsRUFBQWUsZ0JBQW1DQyxFQUFBLE1BRTlCZixFQUFBLGNBQW1C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LEVBQXVCbkgsT0FBQXNOLEVBQUEsaUJBQUF0TixDQUFnQm9OLEVBQUEsNkJBQUEzTCxLQUFBNEssWUFBQWxGLFdBQUExRixLQUFBMEYsV0FDdkMsT0FBYXpKLEVBQUEsY0FBb0IyUSxFQUFBLEVBQWMsQ0FDL0MvUCxVQUFBLGVBQ0ErRyxNQUFlaUosRUFBQSxFQUFZQyxnQkFBaUI5UCxFQUFBLElBQzVDK1AsUUFBaUI5USxFQUFBLGNBQW9CNFAsRUFBQSxZQUFXLENBQ2hEbUIsUUFBQSxrQ0FDQUMsUUFBQWpOLEtBQUFrTix1QkFFU2pSLEVBQUEsY0FBb0JrUixFQUFBLEVBQVksQ0FDekNoSSxPQUNBbUQsb0JBQ0FNLDJCQUNBQywwQkFDQTNELGNBQ0E1SSxhQUNBOFEsb0JBQUFwTixLQUFBb0ksa0JBQ0FMLGdCQUFBL0gsS0FBQWdJLGNBQ0FQLGdCQUFBekgsS0FBQTBILGNBQ0EyRixhQUFBck4sS0FBQTRFLFdBQ0FrQixhQUFBSixFQUNBWSxhQUFBSCxFQUNBdkYsaUJBQUFaLEtBQUFZLGlCQUNBME0sdUJBQUE5RyxFQUNBa0UscUJBQUExSyxLQUFBMEsscUJBQ0E2QyxvQkFBQXZOLEtBQUF1TixvQkFDQWIsd0JBQ0EvQixhQUFBM0ssS0FBQTJLLGFBQ0FnQyxvQkFDQXRFLFlBQ0FJLDJCQTNoQjhFeEYsRUFBaUJwRCxFQUFBL0IsVUFBQWdELEdBQW9DQyxHQUFrQmtDLEVBQWlCcEQsRUFBQWtCLEdBZ2lCdEtzRCxFQS9lQSxHQWtmQWhCLEVBQWdCSyxFQUFlLGdCQUMvQnBILFlBQUEsSUFJZWtILEVBQUEsUUFBQWdLLElBQUksQ0FBRWpQLE9BQUFrUCxFQUFBLEVBQUFsUCxDQUFXdkIsRUFBQSxJQUEwQnVCLE9BQUFtUCxFQUFBLEVBQUFuUCxDQUFrQnZCLEVBQUEsSUFBMEIyUSxFQUFBLEVBQWdCOUIsRUFBQSxxQkFBdkcsQ0FBNkhuSSIsImZpbGUiOiJ2ZW5kb3JzfmFjdGl2aXR5LXNpZGViYXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBGb3JtYXR0ZWRNZXNzYWdlIH0gZnJvbSAncmVhY3QtaW50bCc7XG5pbXBvcnQgQnV0dG9uIGZyb20gJy4uLy4uL2NvbXBvbmVudHMvYnV0dG9uJztcbmltcG9ydCBEcm9wZG93bk1lbnUgZnJvbSAnLi4vLi4vY29tcG9uZW50cy9kcm9wZG93bi1tZW51JztcbmltcG9ydCBNZW51VG9nZ2xlIGZyb20gJy4uLy4uL2NvbXBvbmVudHMvZHJvcGRvd24tbWVudS9NZW51VG9nZ2xlJztcbmltcG9ydCB7IE1lbnUsIE1lbnVJdGVtIH0gZnJvbSAnLi4vLi4vY29tcG9uZW50cy9tZW51JztcbmltcG9ydCBJY29uVGFza0FwcHJvdmFsIGZyb20gJy4uLy4uL2ljb25zL3R3by10b25lZC9JY29uVGFza0FwcHJvdmFsJztcbmltcG9ydCBJY29uVGFza0dlbmVyYWwgZnJvbSAnLi4vLi4vaWNvbnMvdHdvLXRvbmVkL0ljb25UYXNrR2VuZXJhbCc7XG5pbXBvcnQgbWVzc2FnZXMgZnJvbSAnLi9tZXNzYWdlcyc7XG5pbXBvcnQgeyBUQVNLX1RZUEVfQVBQUk9WQUwsIFRBU0tfVFlQRV9HRU5FUkFMIH0gZnJvbSAnLi4vLi4vY29uc3RhbnRzJztcbmltcG9ydCAnLi9BZGRUYXNrTWVudS5zY3NzJztcblxudmFyIEFkZFRhc2tNZW51ID0gZnVuY3Rpb24gQWRkVGFza01lbnUocHJvcHMpIHtcbiAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoRHJvcGRvd25NZW51LCB7XG4gICAgY29uc3RyYWluVG9TY3JvbGxQYXJlbnQ6IHRydWUsXG4gICAgaXNSaWdodEFsaWduZWQ6IHRydWVcbiAgfSwgUmVhY3QuY3JlYXRlRWxlbWVudChCdXR0b24sIHtcbiAgICBpc0Rpc2FibGVkOiBwcm9wcy5pc0Rpc2FibGVkLFxuICAgIHR5cGU6IFwiYnV0dG9uXCJcbiAgfSwgUmVhY3QuY3JlYXRlRWxlbWVudChNZW51VG9nZ2xlLCBudWxsLCBSZWFjdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIG1lc3NhZ2VzLnRhc2tzQWRkVGFzaykpKSwgUmVhY3QuY3JlYXRlRWxlbWVudChNZW51LCB7XG4gICAgY2xhc3NOYW1lOiBcImJjcy1BZGRUYXNrTWVudVwiXG4gIH0sIFJlYWN0LmNyZWF0ZUVsZW1lbnQoTWVudUl0ZW0sIHtcbiAgICBjbGFzc05hbWU6IFwiYmNzLUFkZFRhc2tNZW51LW1lbnVJdGVtXCIsXG4gICAgb25DbGljazogZnVuY3Rpb24gb25DbGljaygpIHtcbiAgICAgIHJldHVybiBwcm9wcy5vbk1lbnVJdGVtQ2xpY2soVEFTS19UWVBFX0dFTkVSQUwpO1xuICAgIH1cbiAgfSwgUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgY2xhc3NOYW1lOiBcImJjcy1BZGRUYXNrTWVudS1pY29uXCJcbiAgfSwgUmVhY3QuY3JlYXRlRWxlbWVudChJY29uVGFza0dlbmVyYWwsIHtcbiAgICB3aWR0aDogMzAsXG4gICAgaGVpZ2h0OiAzMFxuICB9KSksIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgbnVsbCwgUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgY2xhc3NOYW1lOiBcImJjcy1BZGRUYXNrTWVudS10aXRsZVwiXG4gIH0sIFJlYWN0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgbWVzc2FnZXMudGFza0FkZFRhc2tHZW5lcmFsKSksIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIGNsYXNzTmFtZTogXCJiY3MtQWRkVGFza01lbnUtZGVzY3JpcHRpb25cIlxuICB9LCBSZWFjdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIG1lc3NhZ2VzLnRhc2tBZGRUYXNrR2VuZXJhbERlc2NyaXB0aW9uKSkpKSwgUmVhY3QuY3JlYXRlRWxlbWVudChNZW51SXRlbSwge1xuICAgIGNsYXNzTmFtZTogXCJiY3MtQWRkVGFza01lbnUtbWVudUl0ZW1cIixcbiAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkge1xuICAgICAgcmV0dXJuIHByb3BzLm9uTWVudUl0ZW1DbGljayhUQVNLX1RZUEVfQVBQUk9WQUwpO1xuICAgIH1cbiAgfSwgUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgY2xhc3NOYW1lOiBcImJjcy1BZGRUYXNrTWVudS1pY29uXCJcbiAgfSwgUmVhY3QuY3JlYXRlRWxlbWVudChJY29uVGFza0FwcHJvdmFsLCB7XG4gICAgd2lkdGg6IDMwLFxuICAgIGhlaWdodDogMzBcbiAgfSkpLCBSZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIG51bGwsIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIGNsYXNzTmFtZTogXCJiY3MtQWRkVGFza01lbnUtdGl0bGVcIlxuICB9LCBSZWFjdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIG1lc3NhZ2VzLnRhc2tBZGRUYXNrQXBwcm92YWwpKSwgUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgY2xhc3NOYW1lOiBcImJjcy1BZGRUYXNrTWVudS1kZXNjcmlwdGlvblwiXG4gIH0sIFJlYWN0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgbWVzc2FnZXMudGFza0FkZFRhc2tBcHByb3ZhbERlc2NyaXB0aW9uKSkpKSkpO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgQWRkVGFza01lbnU7IiwiZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgaWYgKHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiKSB7IF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfTsgfSBlbHNlIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9OyB9IHJldHVybiBfdHlwZW9mKG9iaik7IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfVxuXG5mdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmIChjYWxsICYmIChfdHlwZW9mKGNhbGwpID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpKSB7IHJldHVybiBjYWxsOyB9IHJldHVybiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpOyB9XG5cbmZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IF9nZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5nZXRQcm90b3R5cGVPZiA6IGZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IHJldHVybiBvLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2Yobyk7IH07IHJldHVybiBfZ2V0UHJvdG90eXBlT2Yobyk7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uXCIpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIF9zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcyk7IH1cblxuZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgX3NldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8IGZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IG8uX19wcm90b19fID0gcDsgcmV0dXJuIG87IH07IHJldHVybiBfc2V0UHJvdG90eXBlT2YobywgcCk7IH1cblxuZnVuY3Rpb24gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKSB7IGlmIChzZWxmID09PSB2b2lkIDApIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsgaWYgKGtleSBpbiBvYmopIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7IHZhbHVlOiB2YWx1ZSwgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTsgfSBlbHNlIHsgb2JqW2tleV0gPSB2YWx1ZTsgfSByZXR1cm4gb2JqOyB9XG5cbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBBZGRUYXNrTWVudSBmcm9tICcuL0FkZFRhc2tNZW51JztcbmltcG9ydCBUYXNrTW9kYWwgZnJvbSAnLi9UYXNrTW9kYWwnO1xuaW1wb3J0IHsgVEFTS19UWVBFX0FQUFJPVkFMIH0gZnJvbSAnLi4vLi4vY29uc3RhbnRzJztcblxudmFyIEFkZFRhc2tCdXR0b24gPVxuLyojX19QVVJFX18qL1xuZnVuY3Rpb24gKF9SZWFjdCRDb21wb25lbnQpIHtcbiAgX2luaGVyaXRzKEFkZFRhc2tCdXR0b24sIF9SZWFjdCRDb21wb25lbnQpO1xuXG4gIGZ1bmN0aW9uIEFkZFRhc2tCdXR0b24oKSB7XG4gICAgdmFyIF9nZXRQcm90b3R5cGVPZjI7XG5cbiAgICB2YXIgX3RoaXM7XG5cbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQWRkVGFza0J1dHRvbik7XG5cbiAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgIGFyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgfVxuXG4gICAgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoX2dldFByb3RvdHlwZU9mMiA9IF9nZXRQcm90b3R5cGVPZihBZGRUYXNrQnV0dG9uKSkuY2FsbC5hcHBseShfZ2V0UHJvdG90eXBlT2YyLCBbdGhpc10uY29uY2F0KGFyZ3MpKSk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSksIFwic3RhdGVcIiwge1xuICAgICAgZXJyb3I6IG51bGwsXG4gICAgICBpc1Rhc2tGb3JtT3BlbjogZmFsc2UsXG4gICAgICB0YXNrVHlwZTogVEFTS19UWVBFX0FQUFJPVkFMXG4gICAgfSk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSksIFwiaGFuZGxlQ2xpY2tNZW51SXRlbVwiLCBmdW5jdGlvbiAodGFza1R5cGUpIHtcbiAgICAgIHJldHVybiBfdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIGlzVGFza0Zvcm1PcGVuOiB0cnVlLFxuICAgICAgICB0YXNrVHlwZTogdGFza1R5cGVcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpLCBcImhhbmRsZU1vZGFsQ2xvc2VcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgX3RoaXMucHJvcHMub25UYXNrTW9kYWxDbG9zZSgpO1xuXG4gICAgICBfdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIGlzVGFza0Zvcm1PcGVuOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IG51bGxcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpLCBcImhhbmRsZVN1Ym1pdFN1Y2Nlc3NcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIF90aGlzLnNldFN0YXRlKHtcbiAgICAgICAgaXNUYXNrRm9ybU9wZW46IGZhbHNlLFxuICAgICAgICBlcnJvcjogbnVsbFxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSksIFwiaGFuZGxlU3VibWl0RXJyb3JcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICAgIHJldHVybiBfdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIGVycm9yOiBlXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIHJldHVybiBfdGhpcztcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhBZGRUYXNrQnV0dG9uLCBbe1xuICAgIGtleTogXCJyZW5kZXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgdmFyIF90aGlzJHByb3BzID0gdGhpcy5wcm9wcyxcbiAgICAgICAgICBpc0Rpc2FibGVkID0gX3RoaXMkcHJvcHMuaXNEaXNhYmxlZCxcbiAgICAgICAgICB0YXNrRm9ybVByb3BzID0gX3RoaXMkcHJvcHMudGFza0Zvcm1Qcm9wcztcbiAgICAgIHZhciBfdGhpcyRzdGF0ZSA9IHRoaXMuc3RhdGUsXG4gICAgICAgICAgaXNUYXNrRm9ybU9wZW4gPSBfdGhpcyRzdGF0ZS5pc1Rhc2tGb3JtT3BlbixcbiAgICAgICAgICB0YXNrVHlwZSA9IF90aGlzJHN0YXRlLnRhc2tUeXBlLFxuICAgICAgICAgIGVycm9yID0gX3RoaXMkc3RhdGUuZXJyb3I7XG4gICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChSZWFjdC5GcmFnbWVudCwgbnVsbCwgUmVhY3QuY3JlYXRlRWxlbWVudChBZGRUYXNrTWVudSwge1xuICAgICAgICBpc0Rpc2FibGVkOiBpc0Rpc2FibGVkLFxuICAgICAgICBvbk1lbnVJdGVtQ2xpY2s6IHRoaXMuaGFuZGxlQ2xpY2tNZW51SXRlbVxuICAgICAgfSksIFJlYWN0LmNyZWF0ZUVsZW1lbnQoVGFza01vZGFsLCB7XG4gICAgICAgIGVycm9yOiBlcnJvcixcbiAgICAgICAgb25TdWJtaXRFcnJvcjogdGhpcy5oYW5kbGVTdWJtaXRFcnJvcixcbiAgICAgICAgb25TdWJtaXRTdWNjZXNzOiB0aGlzLmhhbmRsZVN1Ym1pdFN1Y2Nlc3MsXG4gICAgICAgIG9uTW9kYWxDbG9zZTogdGhpcy5oYW5kbGVNb2RhbENsb3NlLFxuICAgICAgICBpc1Rhc2tGb3JtT3BlbjogaXNUYXNrRm9ybU9wZW4sXG4gICAgICAgIHRhc2tGb3JtUHJvcHM6IHRhc2tGb3JtUHJvcHMsXG4gICAgICAgIHRhc2tUeXBlOiB0YXNrVHlwZVxuICAgICAgfSkpO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBBZGRUYXNrQnV0dG9uO1xufShSZWFjdC5Db21wb25lbnQpO1xuXG5fZGVmaW5lUHJvcGVydHkoQWRkVGFza0J1dHRvbiwgXCJkZWZhdWx0UHJvcHNcIiwge1xuICBpc0Rpc2FibGVkOiBmYWxzZVxufSk7XG5cbmV4cG9ydCBkZWZhdWx0IEFkZFRhc2tCdXR0b247IiwiZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgaWYgKHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiKSB7IF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfTsgfSBlbHNlIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9OyB9IHJldHVybiBfdHlwZW9mKG9iaik7IH1cblxuZnVuY3Rpb24gX2V4dGVuZHMoKSB7IF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTsgcmV0dXJuIF9leHRlbmRzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IH1cblxuZnVuY3Rpb24gYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCBrZXksIGFyZykgeyB0cnkgeyB2YXIgaW5mbyA9IGdlbltrZXldKGFyZyk7IHZhciB2YWx1ZSA9IGluZm8udmFsdWU7IH0gY2F0Y2ggKGVycm9yKSB7IHJlamVjdChlcnJvcik7IHJldHVybjsgfSBpZiAoaW5mby5kb25lKSB7IHJlc29sdmUodmFsdWUpOyB9IGVsc2UgeyBQcm9taXNlLnJlc29sdmUodmFsdWUpLnRoZW4oX25leHQsIF90aHJvdyk7IH0gfVxuXG5mdW5jdGlvbiBfYXN5bmNUb0dlbmVyYXRvcihmbikgeyByZXR1cm4gZnVuY3Rpb24gKCkgeyB2YXIgc2VsZiA9IHRoaXMsIGFyZ3MgPSBhcmd1bWVudHM7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7IHZhciBnZW4gPSBmbi5hcHBseShzZWxmLCBhcmdzKTsgZnVuY3Rpb24gX25leHQodmFsdWUpIHsgYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCBcIm5leHRcIiwgdmFsdWUpOyB9IGZ1bmN0aW9uIF90aHJvdyhlcnIpIHsgYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCBcInRocm93XCIsIGVycik7IH0gX25leHQodW5kZWZpbmVkKTsgfSk7IH07IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfVxuXG5mdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmIChjYWxsICYmIChfdHlwZW9mKGNhbGwpID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpKSB7IHJldHVybiBjYWxsOyB9IHJldHVybiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpOyB9XG5cbmZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IF9nZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5nZXRQcm90b3R5cGVPZiA6IGZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IHJldHVybiBvLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2Yobyk7IH07IHJldHVybiBfZ2V0UHJvdG90eXBlT2Yobyk7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uXCIpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIF9zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcyk7IH1cblxuZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgX3NldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8IGZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IG8uX19wcm90b19fID0gcDsgcmV0dXJuIG87IH07IHJldHVybiBfc2V0UHJvdG90eXBlT2YobywgcCk7IH1cblxuZnVuY3Rpb24gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKSB7IGlmIChzZWxmID09PSB2b2lkIDApIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsgaWYgKGtleSBpbiBvYmopIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7IHZhbHVlOiB2YWx1ZSwgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTsgfSBlbHNlIHsgb2JqW2tleV0gPSB2YWx1ZTsgfSByZXR1cm4gb2JqOyB9XG5cbi8qKlxuICogXG4gKiBAZmlsZSBBY3Rpdml0eSBmZWVkIHNpZGViYXIgY29tcG9uZW50XG4gKiBAYXV0aG9yIEJveFxuICovXG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgZGVib3VuY2UgZnJvbSAnbG9kYXNoL2RlYm91bmNlJztcbmltcG9ydCBub29wIGZyb20gJ2xvZGFzaC9ub29wJztcbmltcG9ydCBmbG93IGZyb20gJ2xvZGFzaC9mbG93JztcbmltcG9ydCBtZXNzYWdlcyBmcm9tICcuLi9jb21tb24vbWVzc2FnZXMnO1xuaW1wb3J0IHsgd2l0aEFQSUNvbnRleHQgfSBmcm9tICcuLi9jb21tb24vYXBpLWNvbnRleHQnO1xuaW1wb3J0IHsgd2l0aEVycm9yQm91bmRhcnkgfSBmcm9tICcuLi9jb21tb24vZXJyb3ItYm91bmRhcnknO1xuaW1wb3J0IHsgRmVhdHVyZUZsYWcsIHdpdGhGZWF0dXJlQ29uc3VtZXIsIGlzRmVhdHVyZUVuYWJsZWQgfSBmcm9tICcuLi9jb21tb24vZmVhdHVyZS1jaGVja2luZyc7XG5pbXBvcnQgeyBnZXRCYWRVc2VyRXJyb3IsIGdldEJhZEl0ZW1FcnJvciB9IGZyb20gJy4uLy4uL3V0aWxzL2Vycm9yJztcbmltcG9ydCBBUEkgZnJvbSAnLi4vLi4vYXBpJztcbmltcG9ydCB7IHdpdGhMb2dnZXIgfSBmcm9tICcuLi9jb21tb24vbG9nZ2VyJztcbmltcG9ydCB7IG1hcmsgfSBmcm9tICcuLi8uLi91dGlscy9wZXJmb3JtYW5jZSc7XG5pbXBvcnQgeyBFVkVOVF9KU19SRUFEWSB9IGZyb20gJy4uL2NvbW1vbi9sb2dnZXIvY29uc3RhbnRzJztcbmltcG9ydCBBY3Rpdml0eUZlZWQgZnJvbSAnLi9hY3Rpdml0eS1mZWVkJztcbmltcG9ydCBTaWRlYmFyQ29udGVudCBmcm9tICcuL1NpZGViYXJDb250ZW50JztcbmltcG9ydCBBZGRUYXNrQnV0dG9uIGZyb20gJy4vQWRkVGFza0J1dHRvbic7XG5pbXBvcnQgU2lkZWJhclV0aWxzIGZyb20gJy4vU2lkZWJhclV0aWxzJztcbmltcG9ydCB7IERFRkFVTFRfQ09MTEFCX0RFQk9VTkNFLCBPUklHSU5fQUNUSVZJVFlfU0lERUJBUiwgU0lERUJBUl9WSUVXX0FDVElWSVRZIH0gZnJvbSAnLi4vLi4vY29uc3RhbnRzJztcbmltcG9ydCAnLi9BY3Rpdml0eVNpZGViYXIuc2Nzcyc7XG5leHBvcnQgdmFyIGFjdGl2aXR5RmVlZElubGluZUVycm9yID0ge1xuICBpbmxpbmVFcnJvcjoge1xuICAgIHRpdGxlOiBtZXNzYWdlcy5lcnJvck9jY3VyZWQsXG4gICAgY29udGVudDogbWVzc2FnZXMuYWN0aXZpdHlGZWVkSXRlbUFwaUVycm9yXG4gIH1cbn07XG52YXIgTUFSS19OQU1FX0pTX1JFQURZID0gXCJcIi5jb25jYXQoT1JJR0lOX0FDVElWSVRZX1NJREVCQVIsIFwiX1wiKS5jb25jYXQoRVZFTlRfSlNfUkVBRFkpO1xubWFyayhNQVJLX05BTUVfSlNfUkVBRFkpO1xuXG52YXIgQWN0aXZpdHlTaWRlYmFyID1cbi8qI19fUFVSRV9fKi9cbmZ1bmN0aW9uIChfUmVhY3QkUHVyZUNvbXBvbmVudCkge1xuICBfaW5oZXJpdHMoQWN0aXZpdHlTaWRlYmFyLCBfUmVhY3QkUHVyZUNvbXBvbmVudCk7XG5cbiAgZnVuY3Rpb24gQWN0aXZpdHlTaWRlYmFyKF9wcm9wcykge1xuICAgIHZhciBfdGhpcztcblxuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBBY3Rpdml0eVNpZGViYXIpO1xuXG4gICAgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBfZ2V0UHJvdG90eXBlT2YoQWN0aXZpdHlTaWRlYmFyKS5jYWxsKHRoaXMsIF9wcm9wcykpOyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QvcHJvcC10eXBlc1xuXG4gICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpLCBcInN0YXRlXCIsIHt9KTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKSwgXCJmZWVkU3VjY2Vzc0NhbGxiYWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIF90aGlzLmZldGNoRmVlZEl0ZW1zKCk7XG4gICAgfSk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSksIFwiZmVlZEVycm9yQ2FsbGJhY2tcIiwgZnVuY3Rpb24gKGUsIGNvZGUsIGNvbnRleHRJbmZvKSB7XG4gICAgICBfdGhpcy5lcnJvckNhbGxiYWNrKGUsIGNvZGUsIGNvbnRleHRJbmZvKTtcblxuICAgICAgX3RoaXMuZmV0Y2hGZWVkSXRlbXMoKTtcbiAgICB9KTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKSwgXCJ0YXNrc0FwaU5ld1wiLCB7XG4gICAgICBjcmVhdGVUYXNrOiBmdW5jdGlvbiBjcmVhdGVUYXNrKG1lc3NhZ2UsIGFzc2lnbmVlcywgdGFza1R5cGUsIGR1ZUF0LCBvblN1Y2Nlc3MsIG9uRXJyb3IpIHtcbiAgICAgICAgdmFyIGN1cnJlbnRVc2VyID0gX3RoaXMuc3RhdGUuY3VycmVudFVzZXI7XG4gICAgICAgIHZhciBfdGhpcyRwcm9wcyA9IF90aGlzLnByb3BzLFxuICAgICAgICAgICAgZmlsZSA9IF90aGlzJHByb3BzLmZpbGUsXG4gICAgICAgICAgICBhcGkgPSBfdGhpcyRwcm9wcy5hcGk7XG5cbiAgICAgICAgaWYgKCFjdXJyZW50VXNlcikge1xuICAgICAgICAgIHRocm93IGdldEJhZFVzZXJFcnJvcigpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGVycm9yQ2FsbGJhY2sgPSBmdW5jdGlvbiBlcnJvckNhbGxiYWNrKGUsIGNvZGUsIGNvbnRleHRJbmZvKSB7XG4gICAgICAgICAgaWYgKG9uRXJyb3IpIHtcbiAgICAgICAgICAgIG9uRXJyb3IoZSwgY29kZSwgY29udGV4dEluZm8pO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIF90aGlzLmZlZWRFcnJvckNhbGxiYWNrKGUsIGNvZGUsIGNvbnRleHRJbmZvKTtcbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgc3VjY2Vzc0NhbGxiYWNrID0gZnVuY3Rpb24gc3VjY2Vzc0NhbGxiYWNrKCkge1xuICAgICAgICAgIGlmIChvblN1Y2Nlc3MpIHtcbiAgICAgICAgICAgIG9uU3VjY2VzcygpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIF90aGlzLmZlZWRTdWNjZXNzQ2FsbGJhY2soKTtcbiAgICAgICAgfTtcblxuICAgICAgICBhcGkuZ2V0RmVlZEFQSShmYWxzZSkuY3JlYXRlVGFza05ldyhmaWxlLCBjdXJyZW50VXNlciwgbWVzc2FnZSwgYXNzaWduZWVzLCB0YXNrVHlwZSwgZHVlQXQsIHN1Y2Nlc3NDYWxsYmFjaywgZXJyb3JDYWxsYmFjayk7IC8vIG5lZWQgdG8gbG9hZCB0aGUgcGVuZGluZyBpdGVtXG5cbiAgICAgICAgX3RoaXMuZmV0Y2hGZWVkSXRlbXMoKTtcbiAgICAgIH0sXG4gICAgICBkZWxldGVUYXNrOiBmdW5jdGlvbiBkZWxldGVUYXNrKHRhc2spIHtcbiAgICAgICAgdmFyIF90aGlzJHByb3BzMiA9IF90aGlzLnByb3BzLFxuICAgICAgICAgICAgZmlsZSA9IF90aGlzJHByb3BzMi5maWxlLFxuICAgICAgICAgICAgYXBpID0gX3RoaXMkcHJvcHMyLmFwaSxcbiAgICAgICAgICAgIF90aGlzJHByb3BzMiRvblRhc2tEZSA9IF90aGlzJHByb3BzMi5vblRhc2tEZWxldGUsXG4gICAgICAgICAgICBvblRhc2tEZWxldGUgPSBfdGhpcyRwcm9wczIkb25UYXNrRGUgPT09IHZvaWQgMCA/IG5vb3AgOiBfdGhpcyRwcm9wczIkb25UYXNrRGU7XG4gICAgICAgIGFwaS5nZXRGZWVkQVBJKGZhbHNlKS5kZWxldGVUYXNrTmV3KGZpbGUsIHRhc2ssIGZ1bmN0aW9uICh0YXNrSWQpIHtcbiAgICAgICAgICBfdGhpcy5mZWVkU3VjY2Vzc0NhbGxiYWNrKCk7XG5cbiAgICAgICAgICBvblRhc2tEZWxldGUodGFza0lkKTtcbiAgICAgICAgfSwgX3RoaXMuZmVlZEVycm9yQ2FsbGJhY2spOyAvLyBuZWVkIHRvIGxvYWQgdGhlIHBlbmRpbmcgaXRlbVxuXG4gICAgICAgIF90aGlzLmZldGNoRmVlZEl0ZW1zKCk7XG4gICAgICB9LFxuICAgICAgdXBkYXRlVGFzazogZnVuY3Rpb24gdXBkYXRlVGFzayh0YXNrLCBvblN1Y2Nlc3MsIG9uRXJyb3IpIHtcbiAgICAgICAgdmFyIF90aGlzJHByb3BzMyA9IF90aGlzLnByb3BzLFxuICAgICAgICAgICAgZmlsZSA9IF90aGlzJHByb3BzMy5maWxlLFxuICAgICAgICAgICAgYXBpID0gX3RoaXMkcHJvcHMzLmFwaSxcbiAgICAgICAgICAgIF90aGlzJHByb3BzMyRvblRhc2tVcCA9IF90aGlzJHByb3BzMy5vblRhc2tVcGRhdGUsXG4gICAgICAgICAgICBvblRhc2tVcGRhdGUgPSBfdGhpcyRwcm9wczMkb25UYXNrVXAgPT09IHZvaWQgMCA/IG5vb3AgOiBfdGhpcyRwcm9wczMkb25UYXNrVXA7XG5cbiAgICAgICAgdmFyIGVycm9yQ2FsbGJhY2sgPSBmdW5jdGlvbiBlcnJvckNhbGxiYWNrKGUsIGNvZGUpIHtcbiAgICAgICAgICBpZiAob25FcnJvcikge1xuICAgICAgICAgICAgb25FcnJvcihlLCBjb2RlKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBfdGhpcy5mZWVkRXJyb3JDYWxsYmFjayhlLCBjb2RlKTtcbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgc3VjY2Vzc0NhbGxiYWNrID0gZnVuY3Rpb24gc3VjY2Vzc0NhbGxiYWNrKCkge1xuICAgICAgICAgIF90aGlzLmZlZWRTdWNjZXNzQ2FsbGJhY2soKTtcblxuICAgICAgICAgIGlmIChvblN1Y2Nlc3MpIHtcbiAgICAgICAgICAgIG9uU3VjY2VzcygpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIG9uVGFza1VwZGF0ZSgpO1xuICAgICAgICB9O1xuXG4gICAgICAgIGFwaS5nZXRGZWVkQVBJKGZhbHNlKS51cGRhdGVUYXNrTmV3KGZpbGUsIHRhc2ssIHN1Y2Nlc3NDYWxsYmFjaywgZXJyb3JDYWxsYmFjayk7IC8vIG5lZWQgdG8gbG9hZCB0aGUgcGVuZGluZyBpdGVtXG5cbiAgICAgICAgX3RoaXMuZmV0Y2hGZWVkSXRlbXMoKTtcbiAgICAgIH0sXG4gICAgICB1cGRhdGVUYXNrQXNzaWdubWVudDogZnVuY3Rpb24gdXBkYXRlVGFza0Fzc2lnbm1lbnQodGFza0lkLCB0YXNrQXNzaWdubWVudElkLCBzdGF0dXMpIHtcbiAgICAgICAgdmFyIF90aGlzJHByb3BzNCA9IF90aGlzLnByb3BzLFxuICAgICAgICAgICAgZmlsZSA9IF90aGlzJHByb3BzNC5maWxlLFxuICAgICAgICAgICAgYXBpID0gX3RoaXMkcHJvcHM0LmFwaTtcbiAgICAgICAgYXBpLmdldEZlZWRBUEkoZmFsc2UpLnVwZGF0ZVRhc2tDb2xsYWJvcmF0b3IoZmlsZSwgdGFza0lkLCB0YXNrQXNzaWdubWVudElkLCBzdGF0dXMsIF90aGlzLmZlZWRTdWNjZXNzQ2FsbGJhY2ssIF90aGlzLmZlZWRFcnJvckNhbGxiYWNrKTsgLy8gbmVlZCB0byBsb2FkIHRoZSBwZW5kaW5nIGl0ZW1cblxuICAgICAgICBfdGhpcy5mZXRjaEZlZWRJdGVtcygpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpLCBcImRlbGV0ZVRhc2tcIiwgZnVuY3Rpb24gKF9yZWYpIHtcbiAgICAgIHZhciBpZCA9IF9yZWYuaWQ7XG4gICAgICB2YXIgX3RoaXMkcHJvcHM1ID0gX3RoaXMucHJvcHMsXG4gICAgICAgICAgZmlsZSA9IF90aGlzJHByb3BzNS5maWxlLFxuICAgICAgICAgIGFwaSA9IF90aGlzJHByb3BzNS5hcGksXG4gICAgICAgICAgX3RoaXMkcHJvcHM1JG9uVGFza0RlID0gX3RoaXMkcHJvcHM1Lm9uVGFza0RlbGV0ZSxcbiAgICAgICAgICBvblRhc2tEZWxldGUgPSBfdGhpcyRwcm9wczUkb25UYXNrRGUgPT09IHZvaWQgMCA/IG5vb3AgOiBfdGhpcyRwcm9wczUkb25UYXNrRGU7XG4gICAgICBhcGkuZ2V0RmVlZEFQSShmYWxzZSkuZGVsZXRlVGFzayhmaWxlLCBpZCwgZnVuY3Rpb24gKHRhc2tJZCkge1xuICAgICAgICBfdGhpcy5mZWVkU3VjY2Vzc0NhbGxiYWNrKCk7XG5cbiAgICAgICAgb25UYXNrRGVsZXRlKHRhc2tJZCk7XG4gICAgICB9LCBfdGhpcy5mZWVkRXJyb3JDYWxsYmFjayk7IC8vIG5lZWQgdG8gbG9hZCB0aGUgcGVuZGluZyBpdGVtXG5cbiAgICAgIF90aGlzLmZldGNoRmVlZEl0ZW1zKCk7XG4gICAgfSk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSksIFwidXBkYXRlVGFza1wiLCBmdW5jdGlvbiAoX3JlZjIpIHtcbiAgICAgIHZhciB0ZXh0ID0gX3JlZjIudGV4dCxcbiAgICAgICAgICBpZCA9IF9yZWYyLmlkO1xuICAgICAgdmFyIF90aGlzJHByb3BzNiA9IF90aGlzLnByb3BzLFxuICAgICAgICAgIGZpbGUgPSBfdGhpcyRwcm9wczYuZmlsZSxcbiAgICAgICAgICBhcGkgPSBfdGhpcyRwcm9wczYuYXBpO1xuICAgICAgYXBpLmdldEZlZWRBUEkoZmFsc2UpLnVwZGF0ZVRhc2soZmlsZSwgaWQsIHRleHQsIF90aGlzLmZlZWRTdWNjZXNzQ2FsbGJhY2ssIF90aGlzLmZlZWRFcnJvckNhbGxiYWNrKTsgLy8gbmVlZCB0byBsb2FkIHRoZSBwZW5kaW5nIGl0ZW1cblxuICAgICAgX3RoaXMuZmV0Y2hGZWVkSXRlbXMoKTtcbiAgICB9KTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKSwgXCJ1cGRhdGVUYXNrQXNzaWdubWVudFwiLCBmdW5jdGlvbiAodGFza0lkLCB0YXNrQXNzaWdubWVudElkLCBzdGF0dXMpIHtcbiAgICAgIHZhciBfdGhpcyRwcm9wczcgPSBfdGhpcy5wcm9wcyxcbiAgICAgICAgICBmaWxlID0gX3RoaXMkcHJvcHM3LmZpbGUsXG4gICAgICAgICAgYXBpID0gX3RoaXMkcHJvcHM3LmFwaTtcbiAgICAgIGFwaS5nZXRGZWVkQVBJKGZhbHNlKS51cGRhdGVUYXNrQXNzaWdubWVudChmaWxlLCB0YXNrSWQsIHRhc2tBc3NpZ25tZW50SWQsIHN0YXR1cywgX3RoaXMuZmVlZFN1Y2Nlc3NDYWxsYmFjaywgX3RoaXMuZmVlZEVycm9yQ2FsbGJhY2spOyAvLyBuZWVkIHRvIGxvYWQgdGhlIHBlbmRpbmcgaXRlbVxuXG4gICAgICBfdGhpcy5mZXRjaEZlZWRJdGVtcygpO1xuICAgIH0pO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpLCBcImRlbGV0ZUNvbW1lbnRcIiwgZnVuY3Rpb24gKF9yZWYzKSB7XG4gICAgICB2YXIgaWQgPSBfcmVmMy5pZCxcbiAgICAgICAgICBwZXJtaXNzaW9ucyA9IF9yZWYzLnBlcm1pc3Npb25zO1xuICAgICAgdmFyIF90aGlzJHByb3BzOCA9IF90aGlzLnByb3BzLFxuICAgICAgICAgIGZpbGUgPSBfdGhpcyRwcm9wczguZmlsZSxcbiAgICAgICAgICBhcGkgPSBfdGhpcyRwcm9wczguYXBpLFxuICAgICAgICAgIF90aGlzJHByb3BzOCRvbkNvbW1lbiA9IF90aGlzJHByb3BzOC5vbkNvbW1lbnREZWxldGUsXG4gICAgICAgICAgb25Db21tZW50RGVsZXRlID0gX3RoaXMkcHJvcHM4JG9uQ29tbWVuID09PSB2b2lkIDAgPyBub29wIDogX3RoaXMkcHJvcHM4JG9uQ29tbWVuO1xuICAgICAgYXBpLmdldEZlZWRBUEkoZmFsc2UpLmRlbGV0ZUNvbW1lbnQoZmlsZSwgaWQsIHBlcm1pc3Npb25zLCBmdW5jdGlvbiAoY29tbWVudCkge1xuICAgICAgICBfdGhpcy5mZWVkU3VjY2Vzc0NhbGxiYWNrKCk7XG5cbiAgICAgICAgb25Db21tZW50RGVsZXRlKGNvbW1lbnQpO1xuICAgICAgfSwgX3RoaXMuZmVlZEVycm9yQ2FsbGJhY2spOyAvLyBuZWVkIHRvIGxvYWQgdGhlIHBlbmRpbmcgaXRlbVxuXG4gICAgICBfdGhpcy5mZXRjaEZlZWRJdGVtcygpO1xuICAgIH0pO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpLCBcImNyZWF0ZUNvbW1lbnRcIiwgZnVuY3Rpb24gKHRleHQsIGhhc01lbnRpb24pIHtcbiAgICAgIHZhciBfdGhpcyRwcm9wczkgPSBfdGhpcy5wcm9wcyxcbiAgICAgICAgICBmaWxlID0gX3RoaXMkcHJvcHM5LmZpbGUsXG4gICAgICAgICAgYXBpID0gX3RoaXMkcHJvcHM5LmFwaSxcbiAgICAgICAgICBfdGhpcyRwcm9wczkkb25Db21tZW4gPSBfdGhpcyRwcm9wczkub25Db21tZW50Q3JlYXRlLFxuICAgICAgICAgIG9uQ29tbWVudENyZWF0ZSA9IF90aGlzJHByb3BzOSRvbkNvbW1lbiA9PT0gdm9pZCAwID8gbm9vcCA6IF90aGlzJHByb3BzOSRvbkNvbW1lbjtcbiAgICAgIHZhciBjdXJyZW50VXNlciA9IF90aGlzLnN0YXRlLmN1cnJlbnRVc2VyO1xuXG4gICAgICBpZiAoIWN1cnJlbnRVc2VyKSB7XG4gICAgICAgIHRocm93IGdldEJhZFVzZXJFcnJvcigpO1xuICAgICAgfVxuXG4gICAgICBhcGkuZ2V0RmVlZEFQSShmYWxzZSkuY3JlYXRlQ29tbWVudChmaWxlLCBjdXJyZW50VXNlciwgdGV4dCwgaGFzTWVudGlvbiwgZnVuY3Rpb24gKGNvbW1lbnQpIHtcbiAgICAgICAgb25Db21tZW50Q3JlYXRlKGNvbW1lbnQpO1xuXG4gICAgICAgIF90aGlzLmZlZWRTdWNjZXNzQ2FsbGJhY2soKTtcbiAgICAgIH0sIF90aGlzLmZlZWRFcnJvckNhbGxiYWNrKTsgLy8gbmVlZCB0byBsb2FkIHRoZSBwZW5kaW5nIGl0ZW1cblxuICAgICAgX3RoaXMuZmV0Y2hGZWVkSXRlbXMoKTtcbiAgICB9KTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKSwgXCJjcmVhdGVUYXNrXCIsIGZ1bmN0aW9uIChtZXNzYWdlLCBhc3NpZ25lZXMsIGR1ZUF0KSB7XG4gICAgICB2YXIgY3VycmVudFVzZXIgPSBfdGhpcy5zdGF0ZS5jdXJyZW50VXNlcjtcbiAgICAgIHZhciBfdGhpcyRwcm9wczEwID0gX3RoaXMucHJvcHMsXG4gICAgICAgICAgZmlsZSA9IF90aGlzJHByb3BzMTAuZmlsZSxcbiAgICAgICAgICBhcGkgPSBfdGhpcyRwcm9wczEwLmFwaTtcblxuICAgICAgaWYgKCFjdXJyZW50VXNlcikge1xuICAgICAgICB0aHJvdyBnZXRCYWRVc2VyRXJyb3IoKTtcbiAgICAgIH1cblxuICAgICAgYXBpLmdldEZlZWRBUEkoZmFsc2UpLmNyZWF0ZVRhc2soZmlsZSwgY3VycmVudFVzZXIsIG1lc3NhZ2UsIGFzc2lnbmVlcywgZHVlQXQsIF90aGlzLmZlZWRTdWNjZXNzQ2FsbGJhY2ssIF90aGlzLmZlZWRFcnJvckNhbGxiYWNrKTsgLy8gbmVlZCB0byBsb2FkIHRoZSBwZW5kaW5nIGl0ZW1cblxuICAgICAgX3RoaXMuZmV0Y2hGZWVkSXRlbXMoKTtcbiAgICB9KTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKSwgXCJkZWxldGVBcHBBY3Rpdml0eVwiLCBmdW5jdGlvbiAoX3JlZjQpIHtcbiAgICAgIHZhciBpZCA9IF9yZWY0LmlkO1xuICAgICAgdmFyIF90aGlzJHByb3BzMTEgPSBfdGhpcy5wcm9wcyxcbiAgICAgICAgICBmaWxlID0gX3RoaXMkcHJvcHMxMS5maWxlLFxuICAgICAgICAgIGFwaSA9IF90aGlzJHByb3BzMTEuYXBpO1xuICAgICAgYXBpLmdldEZlZWRBUEkoZmFsc2UpLmRlbGV0ZUFwcEFjdGl2aXR5KGZpbGUsIGlkLCBfdGhpcy5mZWVkU3VjY2Vzc0NhbGxiYWNrLCBfdGhpcy5mZWVkRXJyb3JDYWxsYmFjayk7IC8vIG5lZWQgdG8gbG9hZCB0aGUgcGVuZGluZyBpdGVtXG5cbiAgICAgIF90aGlzLmZldGNoRmVlZEl0ZW1zKCk7XG4gICAgfSk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSksIFwiZmV0Y2hGZWVkSXRlbXNTdWNjZXNzQ2FsbGJhY2tcIiwgZnVuY3Rpb24gKGZlZWRJdGVtcykge1xuICAgICAgX3RoaXMuc2V0U3RhdGUoe1xuICAgICAgICBmZWVkSXRlbXM6IGZlZWRJdGVtcyxcbiAgICAgICAgYWN0aXZpdHlGZWVkRXJyb3I6IHVuZGVmaW5lZFxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSksIFwiZmV0Y2hGZWVkSXRlbXNFcnJvckNhbGxiYWNrXCIsIGZ1bmN0aW9uIChmZWVkSXRlbXMpIHtcbiAgICAgIF90aGlzLnNldFN0YXRlKHtcbiAgICAgICAgZmVlZEl0ZW1zOiBmZWVkSXRlbXMsXG4gICAgICAgIGFjdGl2aXR5RmVlZEVycm9yOiBhY3Rpdml0eUZlZWRJbmxpbmVFcnJvclxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSksIFwiZXJyb3JDYWxsYmFja1wiLCBmdW5jdGlvbiAoZXJyb3IsIGNvZGUpIHtcbiAgICAgIHZhciBjb250ZXh0SW5mbyA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDoge307XG5cbiAgICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLWNvbnNvbGUgKi9cbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgICAgLyogZXNsaW50LWVuYWJsZSBuby1jb25zb2xlICovXG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QvcHJvcC10eXBlc1xuXG4gICAgICBfdGhpcy5wcm9wcy5vbkVycm9yKGVycm9yLCBjb2RlLCBjb250ZXh0SW5mbyk7XG4gICAgfSk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSksIFwiZmV0Y2hDdXJyZW50VXNlclN1Y2Nlc3NDYWxsYmFja1wiLCBmdW5jdGlvbiAoY3VycmVudFVzZXIpIHtcbiAgICAgIF90aGlzLnNldFN0YXRlKHtcbiAgICAgICAgY3VycmVudFVzZXI6IGN1cnJlbnRVc2VyLFxuICAgICAgICBjdXJyZW50VXNlckVycm9yOiB1bmRlZmluZWRcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpLCBcImdldEFwcHJvdmVyQ29udGFjdHNTdWNjZXNzQ2FsbGJhY2tcIiwgZnVuY3Rpb24gKGNvbGxhYm9yYXRvcnMpIHtcbiAgICAgIHZhciBlbnRyaWVzID0gY29sbGFib3JhdG9ycy5lbnRyaWVzO1xuXG4gICAgICBfdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIGFwcHJvdmVyU2VsZWN0b3JDb250YWN0czogZW50cmllc1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSksIFwiZ2V0TWVudGlvbkNvbnRhY3RzU3VjY2Vzc0NhbGxiYWNrXCIsIGZ1bmN0aW9uIChjb2xsYWJvcmF0b3JzKSB7XG4gICAgICB2YXIgZW50cmllcyA9IGNvbGxhYm9yYXRvcnMuZW50cmllcztcblxuICAgICAgX3RoaXMuc2V0U3RhdGUoe1xuICAgICAgICBtZW50aW9uU2VsZWN0b3JDb250YWN0czogZW50cmllc1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSksIFwiZ2V0QXBwcm92ZXJXaXRoUXVlcnlcIiwgZGVib3VuY2UoX3RoaXMuZ2V0Q29sbGFib3JhdG9ycy5iaW5kKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpLCBfdGhpcy5nZXRBcHByb3ZlckNvbnRhY3RzU3VjY2Vzc0NhbGxiYWNrLCBfdGhpcy5lcnJvckNhbGxiYWNrKSwgREVGQVVMVF9DT0xMQUJfREVCT1VOQ0UpKTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKSwgXCJnZXRNZW50aW9uV2l0aFF1ZXJ5XCIsIGRlYm91bmNlKF90aGlzLmdldENvbGxhYm9yYXRvcnMuYmluZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKSwgX3RoaXMuZ2V0TWVudGlvbkNvbnRhY3RzU3VjY2Vzc0NhbGxiYWNrLCBfdGhpcy5lcnJvckNhbGxiYWNrKSwgREVGQVVMVF9DT0xMQUJfREVCT1VOQ0UpKTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKSwgXCJmZXRjaEN1cnJlbnRVc2VyRXJyb3JDYWxsYmFja1wiLCBmdW5jdGlvbiAoZSwgY29kZSkge1xuICAgICAgX3RoaXMuc2V0U3RhdGUoe1xuICAgICAgICBjdXJyZW50VXNlcjogdW5kZWZpbmVkLFxuICAgICAgICBjdXJyZW50VXNlckVycm9yOiB7XG4gICAgICAgICAgbWFza0Vycm9yOiB7XG4gICAgICAgICAgICBlcnJvckhlYWRlcjogbWVzc2FnZXMuY3VycmVudFVzZXJFcnJvckhlYWRlck1lc3NhZ2UsXG4gICAgICAgICAgICBlcnJvclN1YkhlYWRlcjogbWVzc2FnZXMuZGVmYXVsdEVycm9yTWFza1N1YkhlYWRlck1lc3NhZ2VcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBfdGhpcy5lcnJvckNhbGxiYWNrKGUsIGNvZGUsIHtcbiAgICAgICAgZXJyb3I6IGVcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpLCBcImdldEF2YXRhclVybFwiLFxuICAgIC8qI19fUFVSRV9fKi9cbiAgICBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgX3JlZjUgPSBfYXN5bmNUb0dlbmVyYXRvcihcbiAgICAgIC8qI19fUFVSRV9fKi9cbiAgICAgIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUodXNlcklkKSB7XG4gICAgICAgIHZhciBfdGhpcyRwcm9wczEyLCBmaWxlLCBhcGk7XG5cbiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7XG4gICAgICAgICAgd2hpbGUgKDEpIHtcbiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHtcbiAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgIF90aGlzJHByb3BzMTIgPSBfdGhpcy5wcm9wcywgZmlsZSA9IF90aGlzJHByb3BzMTIuZmlsZSwgYXBpID0gX3RoaXMkcHJvcHMxMi5hcGk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdChcInJldHVyblwiLCBhcGkuZ2V0VXNlcnNBUEkoZmFsc2UpLmdldEF2YXRhclVybFdpdGhBY2Nlc3NUb2tlbih1c2VySWQsIGZpbGUuaWQpKTtcblxuICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgIGNhc2UgXCJlbmRcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSwgX2NhbGxlZSwgdGhpcyk7XG4gICAgICB9KSk7XG5cbiAgICAgIHJldHVybiBmdW5jdGlvbiAoX3gpIHtcbiAgICAgICAgcmV0dXJuIF9yZWY1LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICB9O1xuICAgIH0oKSk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSksIFwib25UYXNrTW9kYWxDbG9zZVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICBfdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIGFwcHJvdmVyU2VsZWN0b3JDb250YWN0czogW11cbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpLCBcInJlbmRlckFkZFRhc2tCdXR0b25cIiwgZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGlzRGlzYWJsZWQgPSBfdGhpcy5wcm9wcy5pc0Rpc2FibGVkO1xuICAgICAgdmFyIGFwcHJvdmVyU2VsZWN0b3JDb250YWN0cyA9IF90aGlzLnN0YXRlLmFwcHJvdmVyU2VsZWN0b3JDb250YWN0cztcblxuICAgICAgdmFyIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZSA9IF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpLFxuICAgICAgICAgIGdldEFwcHJvdmVyV2l0aFF1ZXJ5ID0gX2Fzc2VydFRoaXNJbml0aWFsaXplLmdldEFwcHJvdmVyV2l0aFF1ZXJ5LFxuICAgICAgICAgIGdldEF2YXRhclVybCA9IF9hc3NlcnRUaGlzSW5pdGlhbGl6ZS5nZXRBdmF0YXJVcmwsXG4gICAgICAgICAgY3JlYXRlVGFzayA9IF9hc3NlcnRUaGlzSW5pdGlhbGl6ZS50YXNrc0FwaU5ldy5jcmVhdGVUYXNrLFxuICAgICAgICAgIG9uVGFza01vZGFsQ2xvc2UgPSBfYXNzZXJ0VGhpc0luaXRpYWxpemUub25UYXNrTW9kYWxDbG9zZTtcblxuICAgICAgdmFyIHByb3BzID0ge1xuICAgICAgICBpc0Rpc2FibGVkOiBpc0Rpc2FibGVkLFxuICAgICAgICBvblRhc2tNb2RhbENsb3NlOiBvblRhc2tNb2RhbENsb3NlXG4gICAgICB9O1xuICAgICAgdmFyIHRhc2tGb3JtUHJvcHMgPSB7XG4gICAgICAgIGFwcHJvdmVyU2VsZWN0b3JDb250YWN0czogYXBwcm92ZXJTZWxlY3RvckNvbnRhY3RzLFxuICAgICAgICBjcmVhdGVUYXNrOiBjcmVhdGVUYXNrLFxuICAgICAgICBnZXRBcHByb3ZlcldpdGhRdWVyeTogZ2V0QXBwcm92ZXJXaXRoUXVlcnksXG4gICAgICAgIGdldEF2YXRhclVybDogZ2V0QXZhdGFyVXJsLFxuICAgICAgICBpZDogJycsXG4gICAgICAgIG1lc3NhZ2U6ICcnLFxuICAgICAgICBhcHByb3ZlcnM6IFtdXG4gICAgICB9O1xuICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoQWRkVGFza0J1dHRvbiwgX2V4dGVuZHMoe30sIHByb3BzLCB7XG4gICAgICAgIHRhc2tGb3JtUHJvcHM6IHRhc2tGb3JtUHJvcHNcbiAgICAgIH0pKTtcbiAgICB9KTtcblxuICAgIHZhciBsb2dnZXIgPSBfdGhpcy5wcm9wcy5sb2dnZXI7XG4gICAgbG9nZ2VyLm9uUmVhZHlNZXRyaWMoe1xuICAgICAgZW5kTWFya05hbWU6IE1BUktfTkFNRV9KU19SRUFEWVxuICAgIH0pO1xuICAgIHJldHVybiBfdGhpcztcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhBY3Rpdml0eVNpZGViYXIsIFt7XG4gICAga2V5OiBcImNvbXBvbmVudERpZE1vdW50XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgdmFyIGN1cnJlbnRVc2VyID0gdGhpcy5wcm9wcy5jdXJyZW50VXNlcjtcbiAgICAgIHRoaXMuZmV0Y2hGZWVkSXRlbXModHJ1ZSk7XG4gICAgICB0aGlzLmZldGNoQ3VycmVudFVzZXIoY3VycmVudFVzZXIpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGZXRjaGVzIGEgVXNlcnMgaW5mb1xuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge1VzZXJ9IFt1c2VyXSAtIEJveCBVc2VyLiBJZiBtaXNzaW5nLCBnZXRzIHVzZXIgdGhhdCB0aGUgY3VycmVudCB0b2tlbiB3YXMgZ2VuZXJhdGVkIGZvci5cbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwiZmV0Y2hDdXJyZW50VXNlclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBmZXRjaEN1cnJlbnRVc2VyKHVzZXIpIHtcbiAgICAgIHZhciBzaG91bGREZXN0cm95ID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBmYWxzZTtcbiAgICAgIHZhciBfdGhpcyRwcm9wczEzID0gdGhpcy5wcm9wcyxcbiAgICAgICAgICBhcGkgPSBfdGhpcyRwcm9wczEzLmFwaSxcbiAgICAgICAgICBmaWxlID0gX3RoaXMkcHJvcHMxMy5maWxlO1xuXG4gICAgICBpZiAoIWZpbGUpIHtcbiAgICAgICAgdGhyb3cgZ2V0QmFkSXRlbUVycm9yKCk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlb2YgdXNlciA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgYXBpLmdldFVzZXJzQVBJKHNob3VsZERlc3Ryb3kpLmdldFVzZXIoZmlsZS5pZCwgdGhpcy5mZXRjaEN1cnJlbnRVc2VyU3VjY2Vzc0NhbGxiYWNrLCB0aGlzLmZldGNoQ3VycmVudFVzZXJFcnJvckNhbGxiYWNrKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgIGN1cnJlbnRVc2VyOiB1c2VyLFxuICAgICAgICAgIGN1cnJlbnRVc2VyRXJyb3I6IHVuZGVmaW5lZFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogU3VjY2VzcyBjYWxsYmFjayBmb3IgZmV0Y2hpbmcgZmVlZCBpdGVtc1xuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwiZmV0Y2hGZWVkSXRlbXNcIixcblxuICAgIC8qKlxuICAgICAqIEZldGNoZXMgdGhlIGZlZWQgaXRlbXMgZm9yIHRoZSBzaWRlYmFyXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IHNob3VsZERlc3Ryb3kgdHJ1ZSBpZiB0aGUgYXBpIGZhY3Rvcnkgc2hvdWxkIGJlIGRlc3Ryb3llZFxuICAgICAqL1xuICAgIHZhbHVlOiBmdW5jdGlvbiBmZXRjaEZlZWRJdGVtcygpIHtcbiAgICAgIHZhciBzaG91bGRSZWZyZXNoQ2FjaGUgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IGZhbHNlO1xuICAgICAgdmFyIHNob3VsZERlc3Ryb3kgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IGZhbHNlO1xuICAgICAgdmFyIF90aGlzJHByb3BzMTQgPSB0aGlzLnByb3BzLFxuICAgICAgICAgIGZpbGUgPSBfdGhpcyRwcm9wczE0LmZpbGUsXG4gICAgICAgICAgYXBpID0gX3RoaXMkcHJvcHMxNC5hcGksXG4gICAgICAgICAgZmVhdHVyZXMgPSBfdGhpcyRwcm9wczE0LmZlYXR1cmVzO1xuICAgICAgdmFyIHNob3VsZFNob3dOZXdUYXNrcyA9IGlzRmVhdHVyZUVuYWJsZWQoZmVhdHVyZXMsICdhY3Rpdml0eUZlZWQudGFza3MubmV3QXBpJyk7XG4gICAgICB2YXIgc2hvdWxkU2hvd0FwcEFjdGl2aXR5ID0gaXNGZWF0dXJlRW5hYmxlZChmZWF0dXJlcywgJ2FjdGl2aXR5RmVlZC5hcHBBY3Rpdml0eS5lbmFibGVkJyk7XG4gICAgICBhcGkuZ2V0RmVlZEFQSShzaG91bGREZXN0cm95KS5mZWVkSXRlbXMoZmlsZSwgc2hvdWxkUmVmcmVzaENhY2hlLCB0aGlzLmZldGNoRmVlZEl0ZW1zU3VjY2Vzc0NhbGxiYWNrLCB0aGlzLmZldGNoRmVlZEl0ZW1zRXJyb3JDYWxsYmFjaywgdGhpcy5lcnJvckNhbGxiYWNrLCBzaG91bGRTaG93TmV3VGFza3MsIHNob3VsZFNob3dBcHBBY3Rpdml0eSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEhhbmRsZXMgYSBzdWNjZXNzZnVsIGZlZWQgQVBJIGZldGNoXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGZlZWRJdGVtcyAtIHRoZSBmZWVkIGl0ZW1zXG4gICAgICogQHJldHVybiB7dm9pZH1cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiBcImdldENvbGxhYm9yYXRvcnNcIixcblxuICAgIC8qKlxuICAgICAqIEZldGNoZXMgZmlsZSBjb2xsYWJvcmF0b3JzXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBzdWNjZXNzQ2FsbGJhY2sgLSB0aGUgc3VjY2VzcyBjYWxsYmFja1xuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGVycm9yQ2FsbGJhY2sgLSB0aGUgZXJyb3IgY2FsbGJhY2tcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gc2VhcmNoU3RyIC0gdGhlIHNlYXJjaCBzdHJpbmdcbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqL1xuICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRDb2xsYWJvcmF0b3JzKHN1Y2Nlc3NDYWxsYmFjaywgZXJyb3JDYWxsYmFjaywgc2VhcmNoU3RyKSB7XG4gICAgICAvLyBEbyBub3QgZmV0Y2ggd2l0aG91dCBmaWx0ZXJcbiAgICAgIHZhciBfdGhpcyRwcm9wczE1ID0gdGhpcy5wcm9wcyxcbiAgICAgICAgICBmaWxlID0gX3RoaXMkcHJvcHMxNS5maWxlLFxuICAgICAgICAgIGFwaSA9IF90aGlzJHByb3BzMTUuYXBpO1xuXG4gICAgICBpZiAoIXNlYXJjaFN0ciB8fCBzZWFyY2hTdHIudHJpbSgpID09PSAnJykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGFwaS5nZXRGaWxlQ29sbGFib3JhdG9yc0FQSSh0cnVlKS5nZXRGaWxlQ29sbGFib3JhdG9ycyhmaWxlLmlkLCBzdWNjZXNzQ2FsbGJhY2ssIGVycm9yQ2FsbGJhY2ssIHtcbiAgICAgICAgZmlsdGVyX3Rlcm06IHNlYXJjaFN0clxuICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEhhbmRsZXMgYSBmYWlsZWQgZmlsZSB1c2VyIGluZm8gZmV0Y2hcbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtFbGVtZW50c1hockVycm9yfSBlIC0gQVBJIGVycm9yXG4gICAgICogQHJldHVybiB7dm9pZH1cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiBcInJlbmRlclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICB2YXIgX3RoaXMkcHJvcHMxNiA9IHRoaXMucHJvcHMsXG4gICAgICAgICAgZmlsZSA9IF90aGlzJHByb3BzMTYuZmlsZSxcbiAgICAgICAgICBfdGhpcyRwcm9wczE2JGlzRGlzYWIgPSBfdGhpcyRwcm9wczE2LmlzRGlzYWJsZWQsXG4gICAgICAgICAgaXNEaXNhYmxlZCA9IF90aGlzJHByb3BzMTYkaXNEaXNhYiA9PT0gdm9pZCAwID8gZmFsc2UgOiBfdGhpcyRwcm9wczE2JGlzRGlzYWIsXG4gICAgICAgICAgb25WZXJzaW9uSGlzdG9yeUNsaWNrID0gX3RoaXMkcHJvcHMxNi5vblZlcnNpb25IaXN0b3J5Q2xpY2ssXG4gICAgICAgICAgZ2V0VXNlclByb2ZpbGVVcmwgPSBfdGhpcyRwcm9wczE2LmdldFVzZXJQcm9maWxlVXJsLFxuICAgICAgICAgIGZlYXR1cmVzID0gX3RoaXMkcHJvcHMxNi5mZWF0dXJlcztcbiAgICAgIHZhciBfdGhpcyRzdGF0ZSA9IHRoaXMuc3RhdGUsXG4gICAgICAgICAgY3VycmVudFVzZXIgPSBfdGhpcyRzdGF0ZS5jdXJyZW50VXNlcixcbiAgICAgICAgICBhcHByb3ZlclNlbGVjdG9yQ29udGFjdHMgPSBfdGhpcyRzdGF0ZS5hcHByb3ZlclNlbGVjdG9yQ29udGFjdHMsXG4gICAgICAgICAgbWVudGlvblNlbGVjdG9yQ29udGFjdHMgPSBfdGhpcyRzdGF0ZS5tZW50aW9uU2VsZWN0b3JDb250YWN0cyxcbiAgICAgICAgICBmZWVkSXRlbXMgPSBfdGhpcyRzdGF0ZS5mZWVkSXRlbXMsXG4gICAgICAgICAgYWN0aXZpdHlGZWVkRXJyb3IgPSBfdGhpcyRzdGF0ZS5hY3Rpdml0eUZlZWRFcnJvcixcbiAgICAgICAgICBjdXJyZW50VXNlckVycm9yID0gX3RoaXMkc3RhdGUuY3VycmVudFVzZXJFcnJvcjtcbiAgICAgIHZhciB1cGRhdGVUYXNrQXNzaWdubWVudCA9IGlzRmVhdHVyZUVuYWJsZWQoZmVhdHVyZXMsICdhY3Rpdml0eUZlZWQudGFza3MubmV3QXBpJykgPyB0aGlzLnRhc2tzQXBpTmV3LnVwZGF0ZVRhc2tBc3NpZ25tZW50IDogdGhpcy51cGRhdGVUYXNrQXNzaWdubWVudDtcbiAgICAgIHZhciB1cGRhdGVUYXNrID0gaXNGZWF0dXJlRW5hYmxlZChmZWF0dXJlcywgJ2FjdGl2aXR5RmVlZC50YXNrcy5uZXdBcGknKSA/IHRoaXMudGFza3NBcGlOZXcudXBkYXRlVGFzayA6IHRoaXMudXBkYXRlVGFzaztcbiAgICAgIHZhciBkZWxldGVUYXNrID0gaXNGZWF0dXJlRW5hYmxlZChmZWF0dXJlcywgJ2FjdGl2aXR5RmVlZC50YXNrcy5uZXdBcGknKSA/IHRoaXMudGFza3NBcGlOZXcuZGVsZXRlVGFzayA6IHRoaXMuZGVsZXRlVGFzaztcbiAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFNpZGViYXJDb250ZW50LCB7XG4gICAgICAgIGNsYXNzTmFtZTogXCJiY3MtYWN0aXZpdHlcIixcbiAgICAgICAgdGl0bGU6IFNpZGViYXJVdGlscy5nZXRUaXRsZUZvclZpZXcoU0lERUJBUl9WSUVXX0FDVElWSVRZKSxcbiAgICAgICAgYWN0aW9uczogUmVhY3QuY3JlYXRlRWxlbWVudChGZWF0dXJlRmxhZywge1xuICAgICAgICAgIGZlYXR1cmU6IFwiYWN0aXZpdHlGZWVkLnRhc2tzLmNyZWF0ZUJ1dHRvblwiLFxuICAgICAgICAgIGVuYWJsZWQ6IHRoaXMucmVuZGVyQWRkVGFza0J1dHRvblxuICAgICAgICB9KVxuICAgICAgfSwgUmVhY3QuY3JlYXRlRWxlbWVudChBY3Rpdml0eUZlZWQsIHtcbiAgICAgICAgZmlsZTogZmlsZSxcbiAgICAgICAgYWN0aXZpdHlGZWVkRXJyb3I6IGFjdGl2aXR5RmVlZEVycm9yLFxuICAgICAgICBhcHByb3ZlclNlbGVjdG9yQ29udGFjdHM6IGFwcHJvdmVyU2VsZWN0b3JDb250YWN0cyxcbiAgICAgICAgbWVudGlvblNlbGVjdG9yQ29udGFjdHM6IG1lbnRpb25TZWxlY3RvckNvbnRhY3RzLFxuICAgICAgICBjdXJyZW50VXNlcjogY3VycmVudFVzZXIsXG4gICAgICAgIGlzRGlzYWJsZWQ6IGlzRGlzYWJsZWQsXG4gICAgICAgIG9uQXBwQWN0aXZpdHlEZWxldGU6IHRoaXMuZGVsZXRlQXBwQWN0aXZpdHksXG4gICAgICAgIG9uQ29tbWVudENyZWF0ZTogdGhpcy5jcmVhdGVDb21tZW50LFxuICAgICAgICBvbkNvbW1lbnREZWxldGU6IHRoaXMuZGVsZXRlQ29tbWVudCxcbiAgICAgICAgb25UYXNrQ3JlYXRlOiB0aGlzLmNyZWF0ZVRhc2ssXG4gICAgICAgIG9uVGFza0RlbGV0ZTogZGVsZXRlVGFzayxcbiAgICAgICAgb25UYXNrVXBkYXRlOiB1cGRhdGVUYXNrLFxuICAgICAgICBvblRhc2tNb2RhbENsb3NlOiB0aGlzLm9uVGFza01vZGFsQ2xvc2UsXG4gICAgICAgIG9uVGFza0Fzc2lnbm1lbnRVcGRhdGU6IHVwZGF0ZVRhc2tBc3NpZ25tZW50LFxuICAgICAgICBnZXRBcHByb3ZlcldpdGhRdWVyeTogdGhpcy5nZXRBcHByb3ZlcldpdGhRdWVyeSxcbiAgICAgICAgZ2V0TWVudGlvbldpdGhRdWVyeTogdGhpcy5nZXRNZW50aW9uV2l0aFF1ZXJ5LFxuICAgICAgICBvblZlcnNpb25IaXN0b3J5Q2xpY2s6IG9uVmVyc2lvbkhpc3RvcnlDbGljayxcbiAgICAgICAgZ2V0QXZhdGFyVXJsOiB0aGlzLmdldEF2YXRhclVybCxcbiAgICAgICAgZ2V0VXNlclByb2ZpbGVVcmw6IGdldFVzZXJQcm9maWxlVXJsLFxuICAgICAgICBmZWVkSXRlbXM6IGZlZWRJdGVtcyxcbiAgICAgICAgY3VycmVudFVzZXJFcnJvcjogY3VycmVudFVzZXJFcnJvclxuICAgICAgfSkpO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBBY3Rpdml0eVNpZGViYXI7XG59KFJlYWN0LlB1cmVDb21wb25lbnQpO1xuXG5fZGVmaW5lUHJvcGVydHkoQWN0aXZpdHlTaWRlYmFyLCBcImRlZmF1bHRQcm9wc1wiLCB7XG4gIGlzRGlzYWJsZWQ6IGZhbHNlXG59KTtcblxuZXhwb3J0IHsgQWN0aXZpdHlTaWRlYmFyIGFzIEFjdGl2aXR5U2lkZWJhckNvbXBvbmVudCB9O1xuZXhwb3J0IGRlZmF1bHQgZmxvdyhbd2l0aExvZ2dlcihPUklHSU5fQUNUSVZJVFlfU0lERUJBUiksIHdpdGhFcnJvckJvdW5kYXJ5KE9SSUdJTl9BQ1RJVklUWV9TSURFQkFSKSwgd2l0aEFQSUNvbnRleHQsIHdpdGhGZWF0dXJlQ29uc3VtZXJdKShBY3Rpdml0eVNpZGViYXIpOyJdLCJzb3VyY2VSb290IjoiIn0=